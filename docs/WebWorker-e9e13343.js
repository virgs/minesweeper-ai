async function m(s,t={}){const l={env:Object.assign(Object.create(globalThis),t.env||{},{abort(e,r,n,a){e=i(e>>>0),r=i(r>>>0),n=n>>>0,a=a>>>0,(()=>{throw Error(`${e} in ${r}:${n}:${a}`)})()},seed(){return(()=>Date.now()*Math.random())()},"console.log"(e){e=i(e>>>0),console.log(e)}})},{exports:o}=await WebAssembly.instantiate(s,l),u=o.memory||t.env.memory,p=Object.setPrototypeOf({update(e){return e=b(e)||g(),i(o.update(e)>>>0)},guess(e){return e=b(e)||g(),i(o.guess(e)>>>0)}},o);function i(e){if(!e)return null;const r=e+new Uint32Array(u.buffer)[e-4>>>2]>>>1,n=new Uint16Array(u.buffer);let a=e>>>1,c="";for(;r-a>1024;)c+=String.fromCharCode(...n.subarray(a,a+=1024));return c+String.fromCharCode(...n.subarray(a,r))}function b(e){if(e==null)return 0;const r=e.length,n=o.__new(r<<1,2)>>>0,a=new Uint16Array(u.buffer);for(let c=0;c<r;++c)a[(n>>>1)+c]=e.charCodeAt(c);return n}function g(){throw TypeError("value must not be null")}return p}const{memory:f,update:w,guess:d,tests:h}=await(async s=>m(await(async()=>{try{return await globalThis.WebAssembly.compileStreaming(globalThis.fetch(s))}catch{return globalThis.WebAssembly.compile(await(await import("./__vite-browser-external-4ed993c7.js")).readFile(s))}})(),{}))(new URL("/minesweeper-ai/assembly-396cbeb5.wasm",self.location));var y=(s=>(s[s.UPDATE=0]="UPDATE",s[s.GUESS=1]="GUESS",s))(y||{});postMessage({ready:!0});self.onmessage=s=>{const t=s.data;try{switch(t.action){case 0:const l=JSON.parse(w(t.board)),o={messageId:t.messageId,update:l};self.postMessage(o);break;case 1:const u=JSON.parse(d(t.board)),p={messageId:t.messageId,guess:u};self.postMessage(p);break}}catch(l){console.log(`WW ${t} got exception: `+y[t.action]),console.error(l),self.postMessage(l)}};
